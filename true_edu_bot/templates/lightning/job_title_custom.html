{% extends 'admin/base.html' %}

{% block content %}
<form method="POST">
    {% csrf_token %}
    
    <div style="display: flex; min-height: 100vh; align-items: stretch;">
        <!-- Левый блок - Список должностей (сайдбар) -->
        <div style="width: 10%; padding-right: 20px; min-width: 200px;">
            <h4>Должности:</h4>
            <ul style="list-style: none; padding: 0;">
                {% for job_title in job_titles %}
                <li style="padding: 5px; border: 1px solid #ddd; margin-bottom: 1px; background-color: #00234b;">
                    <a href="{% url 'job_title_detail' job_title.id %}" style="color: white; word-wrap: break-word; word-break: break-word; display: block;">
                        {{ job_title.title }}
                    </a>
                </li>
                {% endfor %}
            </ul>
            
            <button type="button" onclick="window.location.href='{% url 'job_title_create' %}'" class="create-button">
                Создать должность
            </button>
        </div>

        <!-- Разделяющая вертикальная линия -->
        <div class="vertical-divider"></div>

        <!-- Правый блок - Информация о выбранной должности -->
        <div style="width: 70%; padding-left: 20px;">
            {% if job_title %}
                <!-- Форма для редактирования существующей должности -->
                <h2>Редактировать должность: {{ job_title.title }}</h2> <!-- Заголовок редактирования -->
                <hr style="border: 1px solid black;" />
                
                <div style="display: flex; justify-content: space-between;">
                    <div style="width: 75%; padding-right: 10px;">
                        <p><strong>Название должности:</strong></p>
                        <input type="text" name="title" value="{{ title }}" style="width: 100%; margin-bottom: 10px;">

                        <p><strong>Описание должности:</strong></p>
                        <textarea name="description" style="width: 100%; margin-bottom: 10px;">{{ description }}</textarea>
                    </div>
                </div>

                <div>
                    <button type="submit" class="save-button" style="margin-right: 10px;">СОХРАНИТЬ</button>
                    {% if job_title.pk %}
                    <!-- Удаление через стандартную форму Django -->
                    <a href="{% url 'job_title_delete' job_title.id %}" class="delete-button">Удалить</a>
                    {% endif %}
                </div>
            {% elif is_create %}
                <!-- Форма для создания новой должности -->
                <h2 style="text-align: center;">Создать новую должность</h2>
                <hr style="border: 1px solid black;" />

                <div style="display: flex; justify-content: space-between;">
                    <div style="width: 75%; padding-right: 10px;">
                        <p><strong>Название должности:</strong></p>
                        <input type="text" name="title" value="{{ title }}" style="width: 100%; margin-bottom: 10px;">

                        <p><strong>Описание должности:</strong></p>
                        <textarea name="description" style="width: 100%; margin-bottom: 10px;">{{ description }}</textarea>
                    </div>
                </div>

                <div style="display: flex; justify-content: flex-start; margin-top: 20px;">
                    <button type="submit" class="save-button">СОХРАНИТЬ</button>
                </div>
            {% else %}
                <!-- Сообщение, когда должность не выбрана -->
                <p>Выберите должность для просмотра деталей.</p>
            {% endif %}
        </div>
    </div>
</form>

<!-- Стили -->
<style>
    .vertical-divider {
        border-left: 2px solid white;
        min-height: 100%;
        margin-left: 20px;
    }

    .save-button {
        background-color: #28a745;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        text-transform: uppercase;
    }

    .delete-button {
        background-color: #dc3545;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        text-transform: uppercase;
        text-decoration: none;
    }

    ul {
        list-style: none;
        padding: 0;
    }

    li {
        padding: 5px;
        border: 1px solid #ddd;
        margin-bottom: 1px;
        background-color: #00234b;
        color: white;
        width: 50%;
    }

</style>
{% endblock %}
